<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Querying API - @motioneffector/inventory</title>
  <link rel="stylesheet" href="../demo-files/demo.css">
  <link rel="stylesheet" href="manual.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github-dark.min.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
  <script>document.addEventListener('DOMContentLoaded', () => hljs.highlightAll());</script>
</head>
<body>
  <div class="page">
    <header class="header">
      <h1 class="header-title">@motioneffector/inventory</h1>
      <p class="header-description">Documentation</p>
      <nav class="header-links">
        <a href="../index.html" class="header-link">Demo</a>
        <a href="https://www.npmjs.com/package/@motioneffector/inventory" class="header-link">npm</a>
        <a href="https://github.com/motioneffector/inventory" class="header-link">GitHub</a>
      </nav>
    </header>

    <div class="manual-layout">
      <aside class="manual-sidebar">
        <nav class="sidebar-nav">
<p><strong><a href="index.html">@motioneffector/inventory</a></strong></p>
<p><strong>Getting Started</strong></p>
<ul>
<li><a href="installation.html">Installation</a></li>
<li><a href="your-first-inventory.html">Your First Inventory</a></li>
</ul>
<p><strong>Core Concepts</strong></p>
<ul>
<li><a href="concept-containers.html">Containers</a></li>
<li><a href="concept-storage-modes.html">Storage Modes</a></li>
<li><a href="concept-item-metadata.html">Item Metadata</a></li>
<li><a href="concept-stacking.html">Stacking</a></li>
<li><a href="concept-events-and-transactions.html">Events &amp; Transactions</a></li>
</ul>
<p><strong>Guides</strong></p>
<ul>
<li><a href="guide-weight-based-inventories.html">Weight-Based Inventories</a></li>
<li><a href="guide-grid-placement.html">Grid Placement</a></li>
<li><a href="guide-equipment-slots.html">Equipment Slots</a></li>
<li><a href="guide-nested-containers.html">Nested Containers</a></li>
<li><a href="guide-transferring-items.html">Transferring Items</a></li>
<li><a href="guide-serialization.html">Serialization</a></li>
<li><a href="guide-using-transactions.html">Using Transactions</a></li>
<li><a href="guide-locking-items.html">Locking Items</a></li>
</ul>
<p><strong>API Reference</strong></p>
<ul>
<li><a href="api-container-management.html">Container Management</a></li>
<li><a href="api-item-operations.html">Item Operations</a></li>
<li><a href="api-querying.html">Querying</a></li>
<li><a href="api-grid-operations.html">Grid Operations</a></li>
<li><a href="api-slot-operations.html">Slot Operations</a></li>
<li><a href="api-stack-operations.html">Stack Operations</a></li>
<li><a href="api-locking.html">Locking</a></li>
<li><a href="api-events.html">Events</a></li>
<li><a href="api-transactions.html">Transactions</a></li>
<li><a href="api-serialization.html">Serialization</a></li>
</ul>

        </nav>
      </aside>

      <main class="manual-content">
        <article class="manual-article">
<h1>Querying API</h1>
<p>Read-only operations for inspecting inventory state.</p>
<hr>
<h2><code>getContents()</code></h2>
<p>Returns all items in a container.</p>
<p><strong>Signature:</strong></p>
<pre><code class="language-typescript">function getContents(
  containerId: ContainerId,
  options?: { deep?: boolean }
): ContainerContents
</code></pre>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead>
<tbody><tr>
<td><code>containerId</code></td>
<td><code>string</code></td>
<td>Yes</td>
<td>ID of the container</td>
</tr>
<tr>
<td><code>options.deep</code></td>
<td><code>boolean</code></td>
<td>No</td>
<td>Include nested container contents. Default: <code>false</code></td>
</tr>
</tbody></table>
<p><strong>Returns:</strong> <code>ContainerContents</code> — Array of <code>ItemEntry</code> objects</p>
<p><strong>Example:</strong></p>
<pre><code class="language-typescript">import { createInventoryManager } from &#39;@motioneffector/inventory&#39;

const inventory = createInventoryManager()
inventory.createContainer(&#39;backpack&#39;, { mode: &#39;unlimited&#39; })
inventory.createContainer(&#39;pouch&#39;, { mode: &#39;unlimited&#39; })

inventory.addItem(&#39;backpack&#39;, &#39;pouch&#39;, 1)
inventory.addItem(&#39;backpack&#39;, &#39;sword&#39;, 1)
inventory.addItem(&#39;pouch&#39;, &#39;gem&#39;, 5)

// Shallow
const shallow = inventory.getContents(&#39;backpack&#39;)
// [{ itemId: &#39;pouch&#39;, quantity: 1 }, { itemId: &#39;sword&#39;, quantity: 1 }]

// Deep - includes pouch contents
const deep = inventory.getContents(&#39;backpack&#39;, { deep: true })
// [{ itemId: &#39;pouch&#39;, quantity: 1 }, { itemId: &#39;sword&#39;, quantity: 1 }, { itemId: &#39;gem&#39;, quantity: 5 }]
</code></pre>
<hr>
<h2><code>getStacks()</code></h2>
<p>Returns individual stack information for a specific item.</p>
<p><strong>Signature:</strong></p>
<pre><code class="language-typescript">function getStacks(
  containerId: ContainerId,
  itemId: ItemId
): ItemStack[]
</code></pre>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead>
<tbody><tr>
<td><code>containerId</code></td>
<td><code>string</code></td>
<td>Yes</td>
<td>ID of the container</td>
</tr>
<tr>
<td><code>itemId</code></td>
<td><code>string</code></td>
<td>Yes</td>
<td>ID of the item</td>
</tr>
</tbody></table>
<p><strong>Returns:</strong> <code>ItemStack[]</code> — Array of stack objects</p>
<p><strong>Example:</strong></p>
<pre><code class="language-typescript">import { createInventoryManager } from &#39;@motioneffector/inventory&#39;

const inventory = createInventoryManager()
inventory.createContainer(&#39;bag&#39;, { mode: &#39;unlimited&#39;, allowStacking: true, maxStackSize: 50 })
inventory.addItem(&#39;bag&#39;, &#39;arrow&#39;, 120) // Creates 3 stacks: 50, 50, 20

const stacks = inventory.getStacks(&#39;bag&#39;, &#39;arrow&#39;)
// [{ itemId: &#39;arrow&#39;, quantity: 50 }, { itemId: &#39;arrow&#39;, quantity: 50 }, { itemId: &#39;arrow&#39;, quantity: 20 }]
</code></pre>
<hr>
<h2><code>hasItem()</code></h2>
<p>Checks if a container has any of the specified item.</p>
<p><strong>Signature:</strong></p>
<pre><code class="language-typescript">function hasItem(
  containerId: ContainerId,
  itemId: ItemId
): boolean
</code></pre>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead>
<tbody><tr>
<td><code>containerId</code></td>
<td><code>string</code></td>
<td>Yes</td>
<td>ID of the container</td>
</tr>
<tr>
<td><code>itemId</code></td>
<td><code>string</code></td>
<td>Yes</td>
<td>ID of the item to check</td>
</tr>
</tbody></table>
<p><strong>Returns:</strong> <code>boolean</code> — True if item exists in container</p>
<p><strong>Example:</strong></p>
<pre><code class="language-typescript">import { createInventoryManager } from &#39;@motioneffector/inventory&#39;

const inventory = createInventoryManager()
inventory.createContainer(&#39;bag&#39;, { mode: &#39;unlimited&#39; })
inventory.addItem(&#39;bag&#39;, &#39;sword&#39;, 1)

console.log(inventory.hasItem(&#39;bag&#39;, &#39;sword&#39;))  // true
console.log(inventory.hasItem(&#39;bag&#39;, &#39;shield&#39;)) // false
</code></pre>
<hr>
<h2><code>getQuantity()</code></h2>
<p>Returns the total quantity of an item in a container.</p>
<p><strong>Signature:</strong></p>
<pre><code class="language-typescript">function getQuantity(
  containerId: ContainerId,
  itemId: ItemId
): number
</code></pre>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead>
<tbody><tr>
<td><code>containerId</code></td>
<td><code>string</code></td>
<td>Yes</td>
<td>ID of the container</td>
</tr>
<tr>
<td><code>itemId</code></td>
<td><code>string</code></td>
<td>Yes</td>
<td>ID of the item</td>
</tr>
</tbody></table>
<p><strong>Returns:</strong> <code>number</code> — Total quantity (sum of all stacks)</p>
<p><strong>Example:</strong></p>
<pre><code class="language-typescript">import { createInventoryManager } from &#39;@motioneffector/inventory&#39;

const inventory = createInventoryManager()
inventory.createContainer(&#39;bag&#39;, { mode: &#39;unlimited&#39; })
inventory.addItem(&#39;bag&#39;, &#39;gold&#39;, 100)
inventory.addItem(&#39;bag&#39;, &#39;gold&#39;, 50)

console.log(inventory.getQuantity(&#39;bag&#39;, &#39;gold&#39;)) // 150
console.log(inventory.getQuantity(&#39;bag&#39;, &#39;silver&#39;)) // 0
</code></pre>
<hr>
<h2><code>canAdd()</code></h2>
<p>Checks if items can be added and returns how many would fit.</p>
<p><strong>Signature:</strong></p>
<pre><code class="language-typescript">function canAdd(
  containerId: ContainerId,
  itemId: ItemId,
  quantity: number
): CanAddResult
</code></pre>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead>
<tbody><tr>
<td><code>containerId</code></td>
<td><code>string</code></td>
<td>Yes</td>
<td>ID of the container</td>
</tr>
<tr>
<td><code>itemId</code></td>
<td><code>string</code></td>
<td>Yes</td>
<td>ID of the item</td>
</tr>
<tr>
<td><code>quantity</code></td>
<td><code>number</code></td>
<td>Yes</td>
<td>Number you want to add</td>
</tr>
</tbody></table>
<p><strong>Returns:</strong> <code>CanAddResult</code></p>
<pre><code class="language-typescript">type CanAddResult = {
  canAdd: boolean     // True if at least one can be added
  maxAddable: number  // Maximum that would fit
  reason?: string     // Why it can&#39;t be added (if applicable)
}
</code></pre>
<p><strong>Example:</strong></p>
<pre><code class="language-typescript">import { createInventoryManager } from &#39;@motioneffector/inventory&#39;

const inventory = createInventoryManager({
  getItemWeight: () =&gt; 5,
})

inventory.createContainer(&#39;bag&#39;, { mode: &#39;weight&#39;, maxWeight: 50 })
inventory.addItem(&#39;bag&#39;, &#39;item&#39;, 5) // 25 weight used

const result = inventory.canAdd(&#39;bag&#39;, &#39;item&#39;, 10)
console.log(result) // { canAdd: true, maxAddable: 5 }
</code></pre>
<hr>
<h2><code>findItem()</code></h2>
<p>Searches all containers for an item.</p>
<p><strong>Signature:</strong></p>
<pre><code class="language-typescript">function findItem(
  itemId: ItemId,
  options?: { deep?: boolean }
): FindItemResult[]
</code></pre>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead>
<tbody><tr>
<td><code>itemId</code></td>
<td><code>string</code></td>
<td>Yes</td>
<td>ID of the item to find</td>
</tr>
<tr>
<td><code>options.deep</code></td>
<td><code>boolean</code></td>
<td>No</td>
<td>Search nested containers. Default: <code>false</code></td>
</tr>
</tbody></table>
<p><strong>Returns:</strong> <code>FindItemResult[]</code></p>
<pre><code class="language-typescript">type FindItemResult = {
  containerId: string
  quantity: number
}
</code></pre>
<p><strong>Example:</strong></p>
<pre><code class="language-typescript">import { createInventoryManager } from &#39;@motioneffector/inventory&#39;

const inventory = createInventoryManager()
inventory.createContainer(&#39;backpack&#39;, { mode: &#39;unlimited&#39; })
inventory.createContainer(&#39;chest&#39;, { mode: &#39;unlimited&#39; })
inventory.addItem(&#39;backpack&#39;, &#39;gold&#39;, 50)
inventory.addItem(&#39;chest&#39;, &#39;gold&#39;, 100)

const locations = inventory.findItem(&#39;gold&#39;)
// [{ containerId: &#39;backpack&#39;, quantity: 50 }, { containerId: &#39;chest&#39;, quantity: 100 }]
</code></pre>
<hr>
<h2><code>getTotalWeight()</code></h2>
<p>Calculates total weight of items in a container.</p>
<p><strong>Signature:</strong></p>
<pre><code class="language-typescript">function getTotalWeight(
  containerId: ContainerId,
  options?: { deep?: boolean }
): number
</code></pre>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead>
<tbody><tr>
<td><code>containerId</code></td>
<td><code>string</code></td>
<td>Yes</td>
<td>ID of the container</td>
</tr>
<tr>
<td><code>options.deep</code></td>
<td><code>boolean</code></td>
<td>No</td>
<td>Include nested container contents. Default: <code>false</code></td>
</tr>
</tbody></table>
<p><strong>Returns:</strong> <code>number</code> — Total weight</p>
<p><strong>Example:</strong></p>
<pre><code class="language-typescript">import { createInventoryManager } from &#39;@motioneffector/inventory&#39;

const inventory = createInventoryManager({
  getItemWeight: (id) =&gt; (id === &#39;sword&#39; ? 5 : 1),
})

inventory.createContainer(&#39;bag&#39;, { mode: &#39;unlimited&#39; })
inventory.addItem(&#39;bag&#39;, &#39;sword&#39;, 2)  // 10 weight
inventory.addItem(&#39;bag&#39;, &#39;potion&#39;, 5) // 5 weight

console.log(inventory.getTotalWeight(&#39;bag&#39;)) // 15
</code></pre>
<hr>
<h2><code>getRemainingCapacity()</code></h2>
<p>Returns remaining capacity information for a container.</p>
<p><strong>Signature:</strong></p>
<pre><code class="language-typescript">function getRemainingCapacity(containerId: ContainerId): RemainingCapacity
</code></pre>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead>
<tbody><tr>
<td><code>containerId</code></td>
<td><code>string</code></td>
<td>Yes</td>
<td>ID of the container</td>
</tr>
</tbody></table>
<p><strong>Returns:</strong> <code>RemainingCapacity</code> — Varies by container mode</p>
<pre><code class="language-typescript">type RemainingCapacity =
  | { type: &#39;unlimited&#39; }
  | { type: &#39;count&#39;; remaining: number }
  | { type: &#39;weight&#39;; remaining: number }
  | { type: &#39;cells&#39;; remaining: number }
  | { type: &#39;slots&#39;; empty: string[] }
</code></pre>
<p><strong>Example:</strong></p>
<pre><code class="language-typescript">import { createInventoryManager } from &#39;@motioneffector/inventory&#39;

const inventory = createInventoryManager()

inventory.createContainer(&#39;bag&#39;, { mode: &#39;count&#39;, maxCount: 10 })
inventory.addItem(&#39;bag&#39;, &#39;item&#39;, 3)

const capacity = inventory.getRemainingCapacity(&#39;bag&#39;)
// { type: &#39;count&#39;, remaining: 7 }
</code></pre>
<hr>
<h2><code>isEmpty()</code></h2>
<p>Checks if a container has no items.</p>
<p><strong>Signature:</strong></p>
<pre><code class="language-typescript">function isEmpty(containerId: ContainerId): boolean
</code></pre>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead>
<tbody><tr>
<td><code>containerId</code></td>
<td><code>string</code></td>
<td>Yes</td>
<td>ID of the container</td>
</tr>
</tbody></table>
<p><strong>Returns:</strong> <code>boolean</code> — True if container has no items</p>
<p><strong>Example:</strong></p>
<pre><code class="language-typescript">import { createInventoryManager } from &#39;@motioneffector/inventory&#39;

const inventory = createInventoryManager()
inventory.createContainer(&#39;bag&#39;, { mode: &#39;unlimited&#39; })

console.log(inventory.isEmpty(&#39;bag&#39;)) // true

inventory.addItem(&#39;bag&#39;, &#39;item&#39;, 1)
console.log(inventory.isEmpty(&#39;bag&#39;)) // false
</code></pre>
<hr>
<h2>Types</h2>
<h3><code>ItemEntry</code></h3>
<pre><code class="language-typescript">type ItemEntry = {
  itemId: string
  quantity: number
  position?: GridPosition
  slot?: string
}
</code></pre>
<h3><code>ItemStack</code></h3>
<pre><code class="language-typescript">type ItemStack = {
  itemId: string
  quantity: number
  position?: GridPosition
}
</code></pre>

        </article>
      </main>
    </div>
  </div>
</body>
</html>
