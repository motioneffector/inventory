<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>@motioneffector/inventory - Demo</title>
  <link rel="stylesheet" href="demo-files/demo.css">
</head>
<body>
  <div class="page">
    <header class="header">
      <h1 class="header-title">@motioneffector/inventory</h1>
      <p class="header-description">Flexible inventory management for games - from simple backpacks to Tetris-style grids</p>
      <nav class="header-links">
        <a href="https://www.npmjs.com/package/@motioneffector/inventory" class="header-link" target="_blank">üì¶ npm</a>
        <a href="https://github.com/motioneffector/inventory" class="header-link" target="_blank">üíª GitHub</a>
        <a href="https://github.com/motioneffector/inventory/wiki" class="header-link" target="_blank">üìñ Manual</a>
      </nav>
    </header>

    <main>
      <!-- TEST RUNNER (FIRST) -->
      <section class="test-runner" id="test-runner">
        <div class="test-runner-header">
          <h2 class="test-runner-title">Test Runner</h2>
        </div>
        <div class="test-runner-content">
          <!-- Control bar: progress bar + buttons, above output console -->
          <div class="test-control-bar">
            <div class="test-progress">
              <div class="test-progress-bar">
                <div class="test-progress-fill" id="progress-fill"></div>
              </div>
              <div class="test-progress-text" id="progress-text">Ready</div>
            </div>
            <div class="test-runner-actions">
              <button class="btn btn-primary" id="run-all-tests">
                <span class="btn-icon">‚ñ∂</span>
                <span>Run All Tests</span>
              </button>
              <button class="btn btn-secondary" id="reset-page">
                <span class="btn-icon">‚Üª</span>
                <span>Reset Page</span>
              </button>
            </div>
          </div>
          <!-- Output console below the control bar -->
          <div class="test-output" id="test-output">
            <div class="test-output-placeholder">Click "Run All Tests" to execute the test suite and see a live demonstration</div>
          </div>
          <div class="test-summary hidden" id="test-summary"></div>
        </div>
      </section>

      <!-- EXHIBIT 1: TETRIS VAULT -->
      <section class="exhibit" id="exhibit-tetris-vault">
        <div class="exhibit-header">
          <h2 class="exhibit-title">Tetris Vault</h2>
          <p class="exhibit-description">Grid-mode inventory with spatial placement, item sizes, rotation, and auto-arrange</p>
        </div>
        <div class="exhibit-content">
          <div class="exhibit-interactive" id="exhibit-1">
            <div class="grid-container">
              <div class="grid-panel">
                <div class="grid-cells" id="grid-cells" style="grid-template-columns: repeat(10, 36px);"></div>
                <div class="capacity-bar"><div class="capacity-fill" id="grid-capacity"></div></div>
              </div>
              <div class="grid-panel loot-pile">
                <div class="loot-pile-title">LOOT PILE</div>
                <div id="loot-items"></div>
              </div>
            </div>
          </div>
          <div class="exhibit-controls">
            <button class="btn btn-primary btn-pulse" id="auto-arrange">Auto-Arrange</button>
            <button class="btn btn-secondary" id="clear-grid">Clear All</button>
            <label class="toggle"><input type="checkbox" id="rotation-toggle" checked><span class="toggle-switch"></span><span class="toggle-label">Rotation</span></label>
          </div>
        </div>
      </section>

      <!-- EXHIBIT 2: ADVENTURER'S LOADOUT -->
      <section class="exhibit" id="exhibit-adventurer-loadout">
        <div class="exhibit-header">
          <h2 class="exhibit-title">Adventurer's Loadout</h2>
          <p class="exhibit-description">Weight-based inventory, equipment slots, nested containers, and item locking</p>
        </div>
        <div class="exhibit-content">
          <div class="exhibit-interactive" id="exhibit-2">
            <div class="loadout-container">
              <div class="character-panel">
                <div class="panel-title">CHARACTER</div>
                <div class="equipment-slots">
                  <div class="equipment-slot" data-slot="head" id="slot-head"><span class="slot-label">head</span></div>
                  <div class="slot-row">
                    <div class="equipment-slot" data-slot="mainhand" id="slot-mainhand"><span class="slot-label">main</span></div>
                    <div class="equipment-slot" data-slot="offhand" id="slot-offhand"><span class="slot-label">off</span></div>
                  </div>
                  <div class="equipment-slot" data-slot="chest" id="slot-chest"><span class="slot-label">chest</span></div>
                  <div class="equipment-slot" data-slot="legs" id="slot-legs"><span class="slot-label">legs</span></div>
                  <div class="equipment-slot" data-slot="feet" id="slot-feet"><span class="slot-label">feet</span></div>
                </div>
              </div>
              <div class="backpack-panel">
                <div class="panel-title">BACKPACK</div>
                <div class="weight-bar">
                  <div class="weight-bar-track">
                    <div class="weight-bar-fill" id="weight-fill"></div>
                    <span class="weight-bar-text" id="weight-text">0/50 kg</span>
                  </div>
                </div>
                <div class="inventory-list" id="backpack-items"></div>
              </div>
              <div class="chest-panel">
                <div class="panel-title">STORAGE CHEST</div>
                <div class="inventory-list" id="chest-items"></div>
              </div>
            </div>
          </div>
          <div class="exhibit-controls">
            <button class="btn btn-secondary" id="lock-gold">üîí Lock Gold</button>
            <button class="btn btn-secondary" id="sort-items">Sort A-Z</button>
            <button class="btn btn-secondary" id="merge-stacks">Merge Stacks</button>
            <button class="btn btn-primary" id="snapshot">üíæ Snapshot</button>
            <button class="btn btn-secondary" id="restore" disabled>‚è™ Restore</button>
          </div>
        </div>
      </section>

      <!-- EXHIBIT 3: TIME-WARP TRADING -->
      <section class="exhibit" id="exhibit-timewarp-trading">
        <div class="exhibit-header">
          <h2 class="exhibit-title">Time-Warp Trading</h2>
          <p class="exhibit-description">Atomic transactions with rollback - watch trades unfold in slow motion</p>
        </div>
        <div class="exhibit-content">
          <div class="exhibit-interactive" id="exhibit-3">
            <div class="trading-container">
              <div class="trader-panel">
                <div class="panel-title">PLAYER</div>
                <div style="margin-bottom: var(--space-md); font-size: var(--font-size-lg);">üí∞ Gold: <span id="player-gold">150</span></div>
                <div class="trader-inventory" id="player-inventory"></div>
                <div style="margin-top: var(--space-md); font-size: var(--font-size-sm); color: var(--text-muted);">Weight: <span id="player-weight">0</span>/30 kg</div>
              </div>
              <div class="trade-table">
                <div class="trade-icon">ü§ù</div>
                <div class="trade-zone" id="trade-zone"><span class="trade-zone-label">Trade Area</span></div>
              </div>
              <div class="trader-panel">
                <div class="panel-title">MERCHANT</div>
                <div class="trader-inventory" id="merchant-inventory"></div>
              </div>
            </div>
            <div class="trade-summary">
              <div class="trade-offer"><span>YOUR OFFER:</span><span id="offer-items">üó°Ô∏è Rusty Sword</span></div>
              <div class="trade-offer"><span>YOU WANT:</span><span id="want-items">‚öîÔ∏è Magic Sword</span></div>
              <div class="trade-offer"><span>NET:</span><span class="trade-net" id="trade-net">-80g</span></div>
            </div>
          </div>
          <div class="exhibit-controls">
            <button class="btn btn-primary btn-pulse" id="execute-trade">‚ñ∂Ô∏è Execute Trade</button>
            <label class="toggle"><input type="checkbox" id="chaos-gremlin"><span class="toggle-switch"></span><span class="toggle-label">üêõ Chaos Gremlin</span></label>
            <div class="speed-slider"><span>‚è±Ô∏è Speed:</span><input type="range" id="trade-speed" min="1" max="5" value="3"></div>
            <button class="btn btn-secondary" id="reset-trade">Reset</button>
          </div>
        </div>
      </section>
    </main>
  </div>

  <!-- Library (from dist) -->
  <script type="module">
    import * as Library from './dist/index.js'
    window.Library = Library
  </script>

  <!-- Demo scripts (order matters) -->
  <script src="demo-files/test-runner.js"></script>
  <script src="demo-files/demo.js"></script>
  <script src="demo-files/tests.js"></script>
</body>
</html>
